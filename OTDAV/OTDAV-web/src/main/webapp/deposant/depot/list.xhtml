<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core">

<h:body>
	<ui:composition template="/resources/front/shared/layout.xhtml">
		<ui:define name="title">OTDAV - WebSite</ui:define>

		<ui:define name="content">
			<div class="row">
				<ui:include src="/deposant/profile/profileSidebar.xhtml" />
	   			 <div class="col-lg-8 margin-top-80px">
                        <div class="padding-15px">
			   			 		<h3>
									Liste Demandes
								</h3>
								
								<h:panelGroup rendered="#{depotProfileBean.depots.size() le 0}">
									pas de demandes
								</h:panelGroup>
							
							   <h:dataTable  rendered="#{depotProfileBean.depots.size() gt 0}"  id="example" styleClass="table table-striped table-bordered"
                                                 cellspacing="0" width="100%"
                                                 value="#{depotProfileBean.depots}" var="d">

                                        <h:column>
                                            <f:facet name="header">#</f:facet>
                                            #{d.id}
                                        </h:column>

                                        <h:column>
                                            <f:facet name="header">Date</f:facet>
                                            #{d.dateCreation	}
                                        </h:column>

                                        <h:column>
                                            <f:facet name="header">Categorie</f:facet>
                                            #{d.category.toString()}
                                        </h:column>

                                        <h:column>
                                            <f:facet name="header">Status</f:facet>
                                            #{d.status}
                                        </h:column>
                                        
                                        <h:column>
                                            <f:facet name="header">Contrat</f:facet>
                                            <h:panelGroup rendered="#{depotBean.depot.contrat == null}">
                                           		 non payé
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{depotBean.depot.contrat != null}">
                                           		 #{d.contrat.status}
                                            </h:panelGroup>
                                        </h:column>
                                        
                                        <h:column>
                                            <f:facet name="header">Action</f:facet>
                                            <h:form>
	                                            <h:commandLink action="#{depotBean.goToDetail(d)}" value="Détail" />
	                                         
												 <h:panelGroup rendered="#{d.status.toString() == 'accepted'}">
													accepted
												</h:panelGroup>
												 <h:panelGroup rendered="#{d.status.toString() == 'confirmed'}">
													confirmed
												</h:panelGroup>
												 <h:panelGroup rendered="#{d.status.toString() == 'refused'}">
													refused
												</h:panelGroup>
											</h:form>
                                        </h:column>

                                    </h:dataTable>
							
						</div>
	   			 </div>
			</div>
		</ui:define>


	</ui:composition>
</h:body>

</html>